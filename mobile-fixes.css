/* Mobile Compatibility Fixes */
/* This file provides critical fixes for mobile responsiveness and scrolling issues */

/* ========================================
   1. CRITICAL: Enable Scrolling
   ======================================== */

/* Override the overflow: hidden from index.css to enable scrolling */
html,
body {
    overflow: visible !important;
    overflow-x: hidden;
    /* Prevent horizontal scroll */
    overflow-y: auto;
    /* Allow vertical scroll */
    position: relative;
}

#root {
    overflow: visible !important;
    min-height: 100vh;
    height: auto;
}

/* ========================================
   2. Mobile Viewport & Touch Optimization
   ======================================== */

/* Smooth scrolling for better UX */
html {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    /* iOS momentum scrolling */
}

/* Prevent zoom on iOS when focusing inputs */
@media screen and (max-width: 768px) {

    input,
    textarea,
    select {
        font-size: 16px !important;
        /* Prevents iOS zoom */
    }
}

/* Touch-friendly tap targets */
button,
a,
[role="button"] {
    min-height: 44px;
    /* Apple's recommended touch target size */
    min-width: 44px;
}

/* ========================================
   3. Layout Container Fixes
   ======================================== */

/* Fix for main app container */
.flex.flex-col.h-full {
    min-height: 100vh;
    height: auto;
}

/* Ensure flex containers can grow */
.flex-1 {
    flex: 1 1 auto;
    min-height: 0;
    /* Important for flex scrolling */
}

/* Fix overflow in main content areas */
.flex-1.overflow-hidden {
    overflow: visible !important;
}

/* ========================================
   4. Scrollable Content Areas
   ======================================== */

/* Ensure all scrollable containers work properly */
.overflow-y-auto,
.overflow-auto {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
}

/* Fix for pages that need full scrolling */
[class*="h-screen"],
[class*="h-full"] {
    min-height: 100vh;
    height: auto !important;
}

/* ========================================
   5. Mobile-Specific Layout Adjustments
   ======================================== */

@media screen and (max-width: 768px) {

    /* Ensure mobile pages are scrollable */
    .mobile-scrollable {
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch;
        height: auto !important;
        min-height: 100vh;
    }

    /* Fix for fixed positioning on mobile */
    .fixed {
        position: fixed;
        -webkit-transform: translateZ(0);
        /* Hardware acceleration */
        transform: translateZ(0);
    }

    /* Improve touch scrolling performance */
    * {
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
    }

    /* Prevent horizontal scrolling */
    body {
        overflow-x: hidden;
        width: 100vw;
    }

    /* Fix for full viewport containers */
    .w-full {
        max-width: 100vw;
    }
}

/* ========================================
   6. Admin Dashboard Fixes
   ======================================== */

/* Make admin dashboard scrollable on mobile */
@media screen and (max-width: 1024px) {

    /* Allow dashboard to scroll */
    .admin-dashboard-container {
        min-height: 100vh;
        height: auto;
    }

    /* Sidebar should be scrollable if needed */
    .admin-sidebar {
        overflow-y: auto;
        max-height: 100vh;
    }

    /* Content area must scroll */
    .admin-content {
        height: auto !important;
        min-height: calc(100vh - 60px);
    }
}

/* ========================================
   7. Modal & Overlay Fixes
   ======================================== */

/* Ensure modals are scrollable */
.fixed.inset-0 {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

/* ========================================
   8. Chat & Messages Fixes
   ======================================== */

/* Ensure chat windows scroll properly */
.chat-overlay {
    overflow: hidden;
    /* Parent should not scroll */
}

.chat-overlay>* {
    height: 100%;
    display: flex;
    flex-direction: column;
}

/* Chat message area should scroll */
.chat-messages,
.chat-content {
    flex: 1;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

/* ========================================
   9. Image & Media Responsiveness
   ======================================== */

@media screen and (max-width: 768px) {

    /* Prevent images from breaking layout */
    img {
        max-width: 100%;
        height: auto;
    }
}

/* ========================================
   10. Safe Area Support (for notched devices)
   ======================================== */

@supports (padding: max(0px)) {
    body {
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
    }

    /* Bottom nav should respect safe area */
    nav.fixed {
        padding-bottom: max(env(safe-area-inset-bottom), 0px);
    }
}

/* ========================================
   11. Performance Optimizations
   ======================================== */

/* Hardware acceleration for smoother scrolling */
.overflow-y-auto,
.overflow-auto,
.overflow-y-scroll {
    will-change: scroll-position;
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
}

/* Reduce repaints during scroll */
.flex-1,
.overflow-y-auto {
    contain: layout style paint;
}

/* ========================================
   12. Utility Classes
   ======================================== */

/* Force scrollable utility */
.force-scrollable {
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    height: auto !important;
    min-height: 100vh !important;
}

/* Prevent scroll utility (for specific cases) */
.no-scroll {
    overflow: hidden !important;
    position: fixed;
    width: 100%;
}

/* Mobile-friendly padding */
@media screen and (max-width: 768px) {
    .mobile-px {
        padding-left: 1rem;
        padding-right: 1rem;
    }

    .mobile-py {
        padding-top: 1rem;
        padding-bottom: 1rem;
    }
}